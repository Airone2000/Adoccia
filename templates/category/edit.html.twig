{% extends 'base.html.twig' %}

{% block javascripts %}
    {{ parent() }}
    {{ encore_entry_script_tags('advancedPicture') }}
{% endblock %}

{% block title %}Edit Category{% endblock %}

{% block body %}
    <h1>Edit Category {{ category.name }}</h1>
    {% if category.picture %}
        <img src="{{ absolute_url(asset(picturesDir ~ 'crpd_' ~category.picture.filename)) | imagine_filter('category_picture_thumbnail')  }}" alt="{{ category.picture.filename }}" width="100" height="100">
    {% endif %}

    {% for label, messages in app.flashes(['draftFormPublished', 'draftFormDeleted']) %}
        <div>
            {% for message in messages %}
                <p>{{ label }}</p>
            {% endfor %}
        </div>
    {% endfor %}
    
    <p>
        {% if category.draftForm is not null %}
            <a href="{{ url('category.setAndEditDraftForm', {'id': category.id}) }}">
                Modify the form (existing draft)
            </a>
            <br>
        {% endif %}

        <a href="{{ url('category.setAndEditDraftForm', {'id': category.id, 'new': true}) }}">
            Modify the form (new draft)
        </a>
    </p>

    {{ include('category/_form.html.twig', {'button_label': 'Update'}) }}

    <a href="{{ path('category.index') }}">back to list</a>

    {{ include('category/_delete_form.html.twig') }}
{% endblock %}
