{% form_theme form 'form/TWIG_widget_types.html.twig' %}

{{ form_start(form, {'attr': {'novalidate': 'novalidate'}}) }}

    {# The field setPublished is automatically set at the end of the form #}
    {% if form.vars.mode is same as('EDITION') %}
        {% set publishedWidget = form_widget(form.published) %}
        <div>
            {{ form_label(form.title) }}
            {{ form_widget(form.title) }}
            {{ form_errors(form.title) }}
        </div>
        <hr>
    {% endif %}

    {# for both display and edition #}
    <div>
        {{ form_widget(form) }}
    </div>

    {% if form.vars.mode is same as('EDITION') %}
        <hr>

        <div>
            <label>
                {% if fiche.id is not null %}
                    <span>En ligne</span>
                {% else %}
                    <span>Publier la fiche imm√©diatement</span>
                {% endif %}

                {{ publishedWidget|raw }}
            </label>
        </div>

        <br><br>

        <button>Submit</button>
    {% endif %}
{{ form_end(form) }}